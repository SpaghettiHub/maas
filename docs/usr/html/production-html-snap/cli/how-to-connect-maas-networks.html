<!DOCTYPE html>
<html>
  <head>
    <title>How to connect MAAS networks</title>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      .collapsible {
	  cursor: pointer;
	  border: none;
	  outline: none;
	  margin: 0;
	  padding:0;
      }

      .content {
	  display: none;
	  overflow: hidden;
      }

      .collapsible:after {
	  content: '\003E'; /* Unicode right-pointing arrow */
	  float: right;
      }
      .collapsible.active:after {
	  content: 'v'; 
      }
    </style>
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      #sidebar ul {margin-left:0;margin-top:0;margin-bottom:0;list-style-type:none;padding-left:20px;}
      #sidebar li {margin: 4px 0;}
      #sidebar details {margin-top:0;margin-bottom:0;}
      #sidebar details > summary {
	  padding: 0px;
	  margin-top: 0px;
	  margin-bottom: 0px;
	  width: 200px;
	  background-color: #ffffff;
	  border: none;
	  cursor: pointer;
    	  list-style-type: "< ";
	  direction: rtl;
      }
      #sidebar details[open] > summary {
	  list-style-type: "v ";
      }

      </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;
      <strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <!-- this is left in just in case we have to update --
	-- older html versions that still use tabs; tbh, we --
	-- should be slowly doing  away with these; other --
	-- changes will be needed, since the older directory --
	-- structures are no longer differentiated, but left --
	-- in place for now so we don't have to dork around --
	-- with the build tools, which expect the subdirs -->
          </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <ul>
	<li>
	  <a href="maas-documentation.html"><b>MAAS Documentation</b></a>
	</li>
        <hr style="margin-top: 15px;">
	<li>
 	  <button class="collapsible" id="m01"><a href="tutorials.html">Tutorials&nbsp;&nbsp;&nbsp;</a></button>
	  <div class="content" id="m02">
	    <ul>
	      <li>
		<a href="tutorial-bootstrapping-maas.html">Bootstrapping MAAS</a>
	      </li>
	      <li>
		<a href="tutorial-try-the-maas-cli.html">Try the MAAS CLI</a>
	      </li>
	      <li>
		<a href="tutorial-creating-custom-images.html">Creating custom images</a>
	      </li>
	      <li>
		<a href="tutorial-get-fancy-cli-output.html">Get fancy CLI output</a>
	      </li>
	    </ul>
	  </div>
	</li>
	<hr style="margin-top: 15px;">
	<li>
	  <button class="collapsible" id="m03"><a href="how-to-guides.html">How-to guides&nbsp;&nbsp;&nbsp;</a></button>
	  <div class="content" id="m04">
	    <ul>
	      <li>
		<button class="collapsible" id="m05"><a href="how-to-set-up-maas.html">Set up MAAS&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m06">
		  <ul>
		    <li>
		      <a href="how-to-install-maas.html">Install MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-upgrade-maas.html">Upgrade MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-back-up-maas.html">Back up MAAS</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m07"><a href="how-to-manage-maas-networks.html">Manage MAAS networks&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m08">
		  <ul>
		    <li>
		      <a href="how-to-connect-maas-networks.html">Connect MAAS networks</a>
		    </li>
		    <li>
		      <a href="how-to-enable-dhcp.html">Enable DHCP</a>
		    </li>
		    <li>
		      <a href="how-to-use-availability-zones.html">Use availability zones</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m09"><a href="how-to-manage-maas-images.html">Manage MAAS images&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m10">
		  <ul>
		    <li>
		      <a href="how-to-use-standard-images.html">Use standard images</a>
		    </li>
		    <li>
		      <a href="how-to-mirror-maas-images.html">Mirror MAAS images</a>
		    </li>
		    <li>
		      <a href="how-to-deploy-a-real-time-kernel.html">Deploy a real-time kernel</a>
		    </li>
		    <li>
		      <a href="how-to-use-vmware-images.html">Use VMWare images</a>
		    </li>
		    <li>
		      <a href="how-to-deploy-a-fips-compliant-kernel.html">Deploy a FIPS-compliant kernel</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m12"><a href="how-to-customise-images.html">Customise images&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m13">
		  <ul>
		    <li>
		      <a href="how-to-build-maas-images.html">Build MAAS images</a>
		    </li>
		    <li>
		      <a href="how-to-build-an-ubuntu-image.html">Build an Ubuntu image</a>
		    </li>
		    <li>
		      <a href="how-to-build-a-rhel-7-image.html">Build a RHEL 7 image</a>
		    </li>
		    <li>
		      <a href="how-to-build-a-rhel-8-image.html">Build a RHEL 8 image</a>
		    </li>
		    <li>
		      <a href="how-to-build-a-centos-7-image.html">Build a CentOS 7 image</a>
		    </li>
		    <li>
		      <a href="how-to-build-an-esxi-image.html">Build an ESXi image</a>
		    </li>
		    <li>
		      <a href="how-to-build-a-windows-image.html">Build a Windows image</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m14"><a href="how-to-manage-controllers.html">Manage controllers&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m15">
		  <ul>
		    <li>
		      <a href="how-to-configure-controllers.html">Configure controllers</a>
		    </li>
		    <li>
		      <a href="how-to-enable-high-availability.html">Enable high availability</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m16"><a href="how-to-use-machines.html">Use machines&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m17">
		  <ul>
		    <li>
		      <a href="how-to-manage-machines.html">Manage machines</a>
		    </li>
		    <li>
		      <a href="how-to-customise-machines.html">Customise machines</a>
		    </li>
		    <li>
		      <a href="how-to-commission-machines-with-maas.html">Commission machines</a>
		    </li>
		    <li>
		      <a href="how-to-allocate-machines-with-maas.html">Allocate machines</a>
		    </li>
		    <li>
		      <a href="how-to-deploy-machines-with-maas.html">Deploy machines</a>
		    </li>
		    <li>
		      <a href="how-to-use-resource-pools.html">Use resource pools</a>
		    </li>
		    <li>
		      <a href="how-to-set-up-power-drivers.html">Set up power drivers</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m18"><a href="how-to-manage-storage.html">Manage storage&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m19">
		  <ul>
		    <li>
		      <a href="how-to-configure-storage-layouts.html">Configure storage layouts</a>
		    </li>
		    <li>
		      <a href="how-to-manage-block-devices.html">Manage block devices</a>
		    </li>
		    <li>
		      <a href="how-to-manage-partitions.html">Manage partitions</a>
		    </li>
		    <li>
		      <a href="how-to-manage-vmfs-datastores.html">Manage VMFS datastores</a>
		    </li>
		    <li>
		      <a href="how-to-create-custom-storage.html">Create custom storage</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m20"><a href="how-to-use-virtual-machines.html">Use virtual machines&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m21">
		  <ul>
		    <li>
		      <a href="how-to-set-up-external-lxd.html">Set up external LXD</a>
		    </li>
		    <li>
		      <a href="how-to-use-external-lxd.html">Use external LXD</a>
		    </li>
		    <li>
		      <a href="how-to-use-lxd-projects.html">Use LXD projects</a>
		    </li>
		    <li>
		      <a href="how-to-manage-virtual-machines.html">Manage virtual machines</a>
		    </li>
		    <li>
		      <a href="how-to-deploy-vms-on-ibm-z.html">Deploy VMs on IBM Z</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m22"><a href="how-to-label-machines.html">Label machines&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m23">
		  <ul>
		    <li>
		      <a href="how-to-manage-tags.html">Manage
			tags</a>
		    </li>
		    <li>
		      <a href="how-to-annotate-machines.html">Annotate
			machines</a>
		    </li>
		    <li>
		      <a href="how-to-use-machine-tags.html">Use
			machine tags</a>
		    </li>
		    <li>
		      <a href="how-to-use-controller-tags.html">Use
			controller tags</a>
		    </li>
		    <li>
		      <a href="how-to-use-storage-tags.html">Use
			storage tags</a>
		    </li>
		    <li>
		      <a href="how-to-use-network-tags.html">Use
			network tags</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m24"><a href="how-to-use-logging.html">Use logging&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m25">
		  <ul>
		    <li>
		      <a href="how-to-read-event-logs.html">Read event logs</a>
		    </li>
		    <li>
		      <a href="how-to-review-audit-logs.html">Review audit logs</a>
		    </li>
		    <li>
		      <a href="how-to-read-commissioning-logs.html">Read commissioning logs</a>
		    </li>
		    <li>
		      <a href="how-to-interpret-testing-logs.html">Interpret testing logs</a>
		    </li>
		    <li>
		      <a href="how-to-use-maas-systemd-logs.html">Use MAAS systemd logs</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m26"><a href="how-to-secure-maas.html">Secure MAAS&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m27">
		  <ul>
		    <li>
		      <a href="how-to-enhance-maas-security">Enhance MAAS security</a>
		    </li>
		    <li>
		      <a href="how-to-manage-user-access.html">Manage user access</a>
		    </li>
		    <li>
		      <a href="how-to-implement-tls.html">Implement TLS</a>
		    </li>
		    <li>
		      <a href="how-to-integrate-vault.html">Integrate Vault</a>
		    </li>
		    <li>
		      <a href="how-to-configure-an-air-gapped-maas.html">Configure an air-gapped MAAS</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m28"><a href="how-to-change-maas-settings.html">Change MAAS settings&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m29">
		  <ul>
		    <li>
		      <a href="how-to-change-maas-3-4-settings.html">Change MAAS 3.4 settings</a>
		    </li>
		    <li>
		      <a href="how-to-change-maas-3-3-settings.html">Change MAAS 3.3 settings</a>
		    </li>
		    <li>
		      <a href="how-to-change-settings-with-the-cli.html">Change settings with the CLI</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m30"><a href="how-to-operate-maas.html">Operate MAAS&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m31">
		  <ul>
		    <li>
		      <a href="how-to-locate-machines.html">Locate machines</a>
		    </li>
		    <li>
		      <a href="how-to-monitor-maas.html">Monitor MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-audit-maas.html">Audit MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-upgrade-postgresql-v12-to-v14.html">Upgrade PostgreSQL v12 to v14</a>
		    </li>
		    <li>
		      <a href="how-to-troubleshoot-common-issues.html">Troubleshoot common issues</a>
		    </li>
		    <li>
		      <a href="how-to-authenticate-to-the-maas-api.html">Authenticate to the MAAS API</a>
		    </li>
		    <li>
		      <a href="how-to-use-the-python-api-client.html">Use the Python API client</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m32"><a href="how-to-join-the-community.html">Join the community&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m33">
		  <ul>
		    <li>
		      <a href="how-to-engage-on-the-discourse-forum.html">Engage on the Discourse forum</a>
		    </li>
		    <li>
		      <a href="https://ubuntu.com/pro">How to get support</a>
		    </li>
		    <li>
		      <a href="how-to-request-features.html">Request features</a>
		    </li>
		    <li>
		      <a href="how-to-report-and-review-bugs.html">Report and review bugs</a>
		    </li>
		    <li>
		      <a href="how-to-contribute-to-maas-documentation.html">Contribute to MAAS documentation</a>
		    </li>
		    <li>
		      <a href="how-to-contact-us.html">How to contact us</a>
		    </li>
		  </ul>
		</div>
	      </li>
	    </ul>
	  </div>
	</li>
	<hr style="margin-top: 15px;">
	<li>
	  <button class="collapsible" id="m34"><a href="reference.html">Reference&nbsp;&nbsp;&nbsp;</a></button>
	  <div class="content" id="m35">
	    <ul>
	      <li>
		<button class="collapsible" id="m36"><a href="reference-general-information.html">General information&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m37">
		  <ul>
		    <li>
		      <a href="reference-installation-requirements.html">Installation requirements</a>
		    </li>
		    <li>
		      <a href="https://launchpad.net/maas">MAAS source code</a>
		    </li>
		    <li>
		      <a href="reference-documentation-style-guide.html">Documentation style guide</a>
		    </li>
		    <li>
		      <a href="reference-maas-glossary.html">MAAS glossary</a>
		    </li>
		    <li>
		      <a href="https://ubuntu.com/community/code-of-conduct">MAAS community code of conduct</a>
		    </li>
		    <li>
		      <a href="reference-api-documentation.html">MAAS API reference</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m38"><a href="reference-maas-scripts.html">Scripts and automation&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m39">
		  <ul>
		    <li>
		      <a href="reference-commissioning-scripts.html">Commissioning scripts</a>
		    </li>
		    <li>
		      <a href="reference-hardware-test-scripts.html">Hardware test scripts</a>
		    </li>
		    <li>
		      <a href="reference-terraform.html">Terraform IAC</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<a href="reference-device-labels.html">Device labels</a>
	      </li>
	      <li>
		<a href="reference-maas-metrics.html">MAAS metrics</a>
	      </li>
	      <li>
		<a href="reference-power-drivers.html">Power drivers</a>
	      </li>
	      <li>
		<a href="reference-bmc-drivers.html">BMC drivers</a>
	      </li>
	      <li>
		<a href="reference-maas-storage.html">Storage reference</a>
	      </li>
	      <li>
		<button class="collapsible" id="m40"><a href="reference-release-notes.html">Release notes and version details&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m41">
		  <ul>
		    <li>
		      <a href="reference-release-notes-maas-3-4.html">MAAS
			3.4 release notes</a>
		    </li>
		    <li>
		      <a href="reference-release-notes-maas-3-3.html">MAAS
			3.3 release notes</a>
		    </li>
		    <li>
		      <a href="reference-release-notes-maas-3-2.html">MAAS
			3.2 release notes</a>
		    </li>
		    <li>
		      <a href="reference-release-notes-maas-3-1.html">MAAS
			3.1 release notes</a>
		    </li>
		    <li>
		      <a href="reference-release-notes-maas-3-0.html">MAAS
			3.0 release notes</a>
		    </li>
		    <li>
		      <a href="reference-release-notes-maas-2-9.html">MAAS
			2.9 release notes</a>
		    </li>
		    <li>
		      <a href="reference-release-notes-maas-2-8.html">MAAS
			2.8 release notes</a>
		    </li>
		    <li>
		      <a href="reference-release-notes-maas-2-7.html">MAAS
			2.7 release notes</a>
		    </li>
		  </ul>
		</div>
	      </li>
	    </ul>
	  </div>
	</li>
	<hr style="margin-top: 15px;">
	<li>
	  <button class="collapsible" id="m42"><a href="explanation.html">Explanation&nbsp;&nbsp;&nbsp;</a></button>
	  <div class="content" id="m43">
	    <ul>
	      <li>
		<a href="about-maas.html">MAAS</a>
	      </li>
	      <li>
		<button class="collapsible" id="m44"><a href="about-machines.html">Machines&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m45">
		  <ul>
		    <li>
		      <a    href="about-machine-basics.html">Machine
			basics</a>
		    </li>
		    <li>
		      <a href="about-commissioning-machines.html">Commissioning
			machines</a>
		    </li>
		    <li>
		      <a href="about-the-machine-life-cycle.html">The
			machine life-cycle</a>
		    </li>
		    <li>
		      <a href="about-deploying-machines.html">Deploying
			machines</a>
		    </li>
		    <li>
		      <a href="about-machine-customisation.html">Machine
			customisation</a>
		    </li>
		    <li>
		      <a href="about-deploying-running-machines.html">Deploying
			running machines</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m46"><a href="about-virtual-machines.html">Virtual machines&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m47">
		  <ul>
		    <li>
		      <a href="about-lxd.html">LXD</a>
		    </li>
		    <li>
		      <a href="about-lxd-projects.html">LXD projects</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m48"><a href="about-images.html">Images&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m49">
		  <ul>
		    <li>
		      <a href="about-standard-images.html">Standard images</a>
		    </li>
		    <li>
		      <a href="about-custom-images.html">Custom images</a>
		    </li>
		  </ul>
		</div>
	      <li>
		<a href="about-controllers.html">Controllers</a>
	      </li>
	      <li>
		<a href="about-device-labels.html">Device labels</a>
	      </li>
	      <li>
		<button class="collapsible" id="m50"><a href="about-maas-networks.html">MAAS networks&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m51">
		  <ul>
		    <li>
		      <a href="about-the-osi-model.html">The OSI model</a>
		    </li>
		    <li>
		      <a href="about-tcp-ip.html">TCP/IP</a>
		    </li>
		    <li>
		      <a href="about-dhcp-in-maas.html">DHCP in MAAS</a>
		    </li>
		    <li>
		      <a href="about-cloud-networking.html">Cloud networking</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<button class="collapsible" id="m52"><a href="about-monitoring-and-logging.html">Monitoring and logging&nbsp;&nbsp;&nbsp;</a></button>
		<div class="content" id="m53">
		  <ul>
		    <li>
		      <a href="about-maas-performance.html">MAAS performance</a>
		    </li>
		    <li>
		      <a href="about-maas-events.html">MAAS events</a>
		    </li>
		    <li>
		      <a href="about-audit-events.html">Audit events</a>
		    </li>
		    <li>
		      <a href="about-maas-logging.html">MAAS logging</a>
		    </li>
		  </ul>
		</div>
	      </li>
	      <li>
		<a href="about-maas-security.html">Ensuring security in MAAS</a>
	      </li>
	      <li>
	      </li>
	    </ul>
	  </div>
	</li>
      </ul>
    </div>
    <div class="container" style="float:left; width:60%; margin-left: 40px; margin-top:40px; margin-right:30px">
      
      <h1>How to connect MAAS networks</h1>
      <blockquote>
      <p><em>Errors or typos? Topics missing? Hard to read? <a href="https://docs.google.com/forms/d/e/1FAIpQLScIt3ffetkaKW3gDv6FDk7CfUTNYP_HGmqQotSTtj2htKkVBw/viewform?usp=pp_url&entry.1739714854=https://maas.io/docs/connecting-maas-networks" target = "_blank">Let us know.</a></em></p>
      </blockquote>
      <h2 id="network-discovery">Network discovery</h2>
      <p>Network discovery scans your environment to identify all connected devices, including non-deployable devices such as routers and switches. To enable or disable discovery:</p>
      <ul>
      <li><p>In the MAAS 3.4 UI, select <em>Networking</em> &gt; <em>Network discovery</em> &gt; <em>Configuration</em>; in the <em>Network discovery</em> drop-down, choose “Enabled” or “Disabled”; <em>Save</em> your changes.</p></li>
      <li><p>For all other MAAS UI versions, select <em>Canonical MAAS</em> &gt; <em>Configuration</em>; in the <em>Network discovery</em> drop-down, choose “Enabled” or “Disabled”; <em>Save</em> your changes.</p></li>
      <li><p>In the MAAS CLI, enter the following command:</p></li>
      </ul>
      <pre class="nohighlight"><code>    maas $PROFILE maas set-config name=network_discovery value=&quot;enabled&quot;</code></pre>
      <h2 id="managed-allocation">Managed allocation</h2>
      <p>Allocation of IP addresses and subnet routes can be MAAS-managed or manual.</p>
      <ul>
      <li><p>For the MAAS UI, choose <em>Subnets</em> &gt; <subnet to be changed> &gt; <em>Edit</em> &gt; <em>Managed allocation</em> &gt; <em>Save</em>.</p></li>
      <li><p>Using the CLI to toggle subnet management, enter this command, using the subnet ID in place of CIDR, if desired:</p></li>
      </ul>
      <pre class="nohighlight"><code>    maas $PROFILE subnet update $SUBNET_CIDR managed=false|true</code></pre>
      <h2 id="network-panel-ui-only">Network panel (UI only)</h2>
      <p>In the MAAS UI, the network dashboard displays everything MAAS knows about its connected networks:</p>
      <ul>
      <li><p>In the 3.4 UI, select <em>Networking &gt; Subnets</em> to access the dashboard. This view can also be filtered with the ‘Filters’ drop-down.</p></li>
      <li><p>For all other MAAS versions, select <em>Subnets</em> to access the dashboard. This view can also be filtered via the <em>Group by</em> drop-down.</p></li>
      </ul>
      <p>While in the network panel:</p>
      <ul>
      <li><p>Select a subnet to view its details.</p></li>
      <li><p>Subnet utilisation figures are near the bottom.</p></li>
      <li><p>Near the bottom of the Subnet summary, you can manage reserved IP ranges.</p></li>
      <li><p>At the very bottom of the Subnet summary, you can track DHCP snippets and used IP addresses.</p></li>
      </ul>
      <h2 id="static-routes">Static routes</h2>
      <p>You can create static IP routes as desired.</p>
      <ul>
      <li><p>With the MAAS 3.4 UI, select <em>Networking &gt; Subnets</em> &gt; <IP of subnet to be changed> &gt; <em>Subnet summary</em> &gt; <em>Add static route</em>; enter a <em>Gateway IP</em> address, <em>Destination</em> subnet, and routing <em>Metric</em>. Don’t forget to <em>Save</em>.</p></li>
      <li><p>Using the UI for all other MAAS versions, choose <em>Add static route</em>; enter a <em>Gateway IP</em> address, <em>Destination</em> subnet, and routine <em>Metric</em>; click ‘Add’ to activate the route. Routes can be edited and removed using the icons to the right of each entry.</p></li>
      <li><p>With the CLI, it’s simple create a static route between two subnets:</p></li>
      </ul>
      <pre class="nohighlight"><code>    maas admin static-routes create source=$SOURCE_SUBNET destination=$DEST_SUBNET \
          gateway_ip=$GATEWAY_IP</code></pre>
      <h2 id="bridging">Bridging</h2>
      <p>To configure a bridge with the MAAS UI, select <em>Machines</em> &gt; machine &gt; <em>Network</em> &gt; hosting network &gt; <em>Create bridge</em> &gt; details &gt; <em>Save interface</em>. You can then deploy machines using this bridge. Note that you can create an “Open switch” bridge if desired, and MAAS will create the netplan model for you.</p>
      <p>You can also use the MAAS CLI/API to configure a bridge via the following procedure:</p>
      <ol type="1">
      <li>Select the interface on which you wish to configure the bridge. This example uses the boot interface, since the boot interface must be connected to a MAAS controlled network – but any interface is allowed:</li>
      </ol>
      <pre class="nohighlight"><code>        INTERFACE_ID=$(maas $PROFILE machine read $SYSTEM_ID | jq .boot_interface.id)</code></pre>
      <ol start="2" type="1">
      <li>Create the bridge:</li>
      </ol>
      <pre class="nohighlight"><code>         BRIDGE_ID=$(maas $PROFILE interfaces create-bridge $SYSTEM_ID name=br0 parent=$INTERFACE_ID | jq .id)</code></pre>
      <ol start="3" type="1">
      <li>Select the subnet where you want the bridge (this should be a MAAS controlled subnet):</li>
      </ol>
      <pre class="nohighlight"><code>        SUBNET_ID=$(maas $PROFILE subnets read | jq -r &#39;.[] | select(.cidr == &quot;10.0.0.0/24&quot; and .managed == true).id&#39;)</code></pre>
      <ol start="4" type="1">
      <li>Connect the bridge to the subnet:</li>
      </ol>
      <pre class="nohighlight"><code>          maas $PROFILE interface link-subnet $SYSTEM_ID $BRIDGE_ID subnet=$SUBNET_ID mode=&quot;STATIC&quot; ip_address=&quot;10.0.0.101&quot;</code></pre>
      <h2 id="bridging-with-netplan">Bridging with Netplan</h2>
      <p>Building a bridge with netplan is independent of MAAS UI or CLI. You can configure a bridge like this:</p>
      <ol type="1">
      <li><p>Open your netplan configuration file. This should be in <code>/etc/netplan</code>. It could be called <code>50-cloud-init.yaml</code>, <code>netplan.yaml</code>, or something else.</p></li>
      <li><p>Modify the file to add a bridge, using the following example as a guide:</p></li>
      </ol>
      <pre class="nohighlight"><code>    network:
              bridges:
                  br0:
                      addresses:
                      - 10.0.0.101/24
                      gateway4: 10.0.0.1
                      interfaces:
                      - enp1s0
                      mac address: 52:54:00:39:9d:f9
                      mtu: 1500
                      name servers:
                          addresses:
                          - 10.0.0.2
                          search:
                          - maas
                      parameters:
                          forward-delay: 15
                          stp: false
              Ethernet&#39;s:
                  enp1s0:
                      match:
                          mac address: 52:54:00:39:9d:f9
                      mtu: 1500
                      set-name: enp1s0
                  enp2s0:
                      match:
                          mac address: 52:54:00:df:87:ac
                      mtu: 1500
                      set-name: enp2s0
                  enp3s0:
                      match:
                          mac address: 52:54:00:a7:ac:46
                      mtu: 1500
                      set-name: enp3s0
              version: 2</code></pre>
      <ol start="3" type="1">
      <li>Apply the new configuration with <code>netplan apply</code>.</li>
      </ol>
      <h2 id="find-fabric-ids-cli">Find fabric IDs (CLI)</h2>
      <p>You’ll need the “fabric ID” to manipulate some networking parameters in the CLI. To determine a fabric ID based on a subnet address:</p>
      <pre class="nohighlight"><code>    FABRIC_ID=$(maas $PROFILE subnet read $SUBNET_CIDR \
              | grep fabric | cut -d &#39; &#39; -f 10 | cut -d &#39;&quot;&#39; -f 2)</code></pre>
      <p>This may come in handy when you need a fabric ID for other CLI calls.</p>
      <h2 id="set-the-default-gateway-cli">Set the default gateway (CLI)</h2>
      <p>To set the default gateway for a subnet, just use this command:</p>
      <pre class="nohighlight"><code>maas $PROFILE subnet update $SUBNET_CIDR gateway_ip=$MY_GATEWAY</code></pre>
      <h2 id="set-up-dns-cli">Set up DNS (CLI)</h2>
      <p>You can set the DNS server for a subnet very easily, with the CLI, like this:</p>
      <pre class="nohighlight"><code>maas $PROFILE subnet update $SUBNET_CIDR dns_servers=$MY_NAME SERVER</code></pre>
      <h2 id="list-subnets-cli">List subnets (CLI)</h2>
      <p>From time to time, you may want to view the list of available subnets. Do that with the following command:</p>
      <pre class="nohighlight"><code>maas admin subnets read | \
      jq -r &#39;([&quot;FABRIC&quot;, &quot;VLAN&quot;, &quot;DHCP&quot;, &quot;SUBNET&quot;]
      | (., map(length*&quot;-&quot;))),
      (.[] | [.vlan.fabric, .vlan.name, .vlan.dhcp_on, .cidr])
      | @tsv&#39; \
      | column -t</code></pre>
      <h2 id="view-subnet-details-cli">View subnet details (CLI)</h2>
      <p>Via the CLI, you can view the details of an individual subnet with the command:</p>
      <pre class="nohighlight"><code>maas $PROFILE subnet read $SUBNET_ID \
      | jq -r &#39;([&quot;NAME&quot;,&quot;CIDR&quot;,&quot;GATEWAY&quot;,&quot;DNS&quot;,&quot;DISCOVERY&quot;,&quot;FABRIC&quot;,&quot;VLAN&quot;]
      | (., map(length*&quot;-&quot;))), ([.name,.cidr,.gateway_ip // &quot;-&quot;, .allow_dns,.active_discovery,.vlan.name,.vlan.fabric]) | @tsv&#39; | column -t</code></pre>
      <p>Look up the subnet ID like this:</p>
      <pre class="nohighlight"><code>maas $PROFILE subnets read \
      | jq -r &#39;([&quot;NAME&quot;, &quot;SUBNET_ID&quot;]
      | (., map(length*&quot;-&quot;))), (.[] | [.name, .id]) | @tsv&#39; \
      | column -t | grep $SUBNET_NAME</code></pre>
      <p>For example, using the “admin” profile with a subnet name containing “192.168.123,” find the subnet ID with this command:</p>
      <pre class="nohighlight"><code>maas admin subnets read \
      | jq -r &#39;([&quot;NAME&quot;, &quot;SUBNET_ID&quot;]
      | (., map(length*&quot;-&quot;))), (.[] | [.name, .id]) | @tsv&#39; \
      | column -t | grep 192.168.123</code></pre>
      <h2 id="edit-machine-interfaces">Edit machine interfaces</h2>
      <p>To edit a machine interface via the 3.4 UI, select <em>Machines</em> &gt; machine &gt; <em>Network</em> &gt; interface &gt; <em>Actions</em> &gt; <em>Edit physical</em> &gt; edit parameters &gt; select <em>IP mode</em> &gt; <em>Save interface</em>.</p>
      <p>To edit a machine interface with the UI for all other MAAS versions, select <em>Machines</em> &gt; machine &gt; <em>Interfaces</em> &gt; interface icon &gt; <em>Edit Physical</em> &gt; <em>IP mode</em> &gt; <em>Save</em>.</p>
      <p>To edit the IP assignment mode of a network interface with the CLI, perform the following steps:</p>
      <ol type="1">
      <li>Find the interface ID and subnet link ID with the command:</li>
      </ol>
      <pre class="nohighlight"><code>    maas $PROFILE node read $SYSTEM_ID</code></pre>
      <ol start="2" type="1">
      <li>Unlink the old interface:</li>
      </ol>
      <pre class="nohighlight"><code>    maas $PROFILE interface unlink-subnet $SYSTEM_ID $INTERFACE_ID id=$SUBNET_LINK_ID</code></pre>
      <ol start="3" type="1">
      <li>Link the new interface:</li>
      </ol>
      <pre class="nohighlight"><code>    maas $PROFILE interface link-subnet $SYSTEM_ID $INTERFACE_ID mode=$IP_MODE subnet=$SUBNET_CIDR [$OPTIONS]</code></pre>
      <p>See <a href="reference-maas-glossary.html">the glossary</a> for the definitions of reserved range types.</p>
      <h2 id="create-bonds">Create bonds</h2>
      <p>To create bonds with the MAAS UI, select more than one interface &gt; <em>Create bond</em> &gt; rename bond &gt; select mode as follows:</p>
      <ul>
      <li><p><strong>balance-rr</strong>: Transmit packets in sequential order from the first available follower through to the last. This mode provides load balancing and fault tolerance.</p></li>
      <li><p><strong>active-backup</strong>: Only one follower in the bond is active. A different follower becomes active if, and only if, the active follower fails. The bond’s MAC address is externally visible on only one port (network adaptor) to avoid confusing the switch.</p></li>
      <li><p><strong>balance-xor</strong>: Transmit based on the selected transmit hash policy. The default policy is simple, which means that an XOR operation selects packages. This XOR compares the source MAC address and the resultant XOR between the destination MAC address, the packet type identifier, and the modulo follower count.</p></li>
      <li><p><strong>broadcast</strong>: Transmit everything on all follower interfaces. This mode provides fault tolerance.</p></li>
      <li><p><strong>802.3ad</strong>: Creates aggregation groups that share the same speed and duplex settings. This mode utilises all followers in the active aggregation, following the IEEE 802.3ad specification.</p></li>
      <li><p><strong>balance-tlb</strong>: Adaptive transmit load balancing, channel bonding that does not require any special switch support.</p></li>
      <li><p><strong>balance-alb</strong>: Adaptive load balancing, includes balance-tlb plus receive load balancing (rlb) for IPV4 traffic. This mode does not require any special switch support. ARP negotiation achieves load balancing in this case.</p></li>
      </ul>
      <p>Having selected a mode, to finish up, assign a <em>MAC address</em> &gt; attach <em>Tags</em> &gt; select <em>Primary</em> &gt; <em>Save</em>.</p>
      <blockquote>
      <p>The MAC address defaults to the MAC address of the primary interface.</p>
      </blockquote>
      <p>To create a bond with the MAAS CLI, execute the following command:</p>
      <pre class="nohighlight"><code>maas $PROFILE interfaces create-bond $SYSTEM_ID name=$BOND_NAME \
      parents=$IFACE1_ID mac_address=$MAC_ADDR \ 
      parents=$IFACE2_ID bond_mode=$BOND_MODE \
      bond_updelay=$BOND_UP bond_downdelay=$BOND_DOWN mtu=$MTU</code></pre>
      <p>Note that:</p>
      <ul>
      <li><p>The <code>parents</code> parameters define which interfaces form the aggregate interface.</p></li>
      <li><p>The <code>bond_updelay</code> and <code>bond_downdelay</code> parameters specify the number of milliseconds to wait before either enabling or disabling a follower after a failure has been detected.</p></li>
      <li><p>There are a wide range of bond parameters you can choose when creating a bond:</p></li>
      </ul>
      <table>
      <colgroup>
      <col style="width: 33%" />
      <col style="width: 66%" />
      </colgroup>
      <thead>
      <tr class="header">
      <th style="text-align: left;">Parameter</th>
      <th style="text-align: left;">Type and description</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td style="text-align: left;"><code>mac_address</code></td>
      <td style="text-align: left;">Optional string. MAC address of the interface.</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>tags</code></td>
      <td style="text-align: left;">Optional string. Tags for the interface.</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>vlan</code></td>
      <td style="text-align: left;">Optional string. VLAN the interface is connected to. If not provided then the interface is considered disconnected.</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>parents</code></td>
      <td style="text-align: left;">Required integer. Parent interface ids that make this bond.</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>bond_miimon</code></td>
      <td style="text-align: left;">Optional integer. The link monitoring frequency in milliseconds. (Default: 100).</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>bond_downdelay</code></td>
      <td style="text-align: left;">Optional integer. Specifies the time, in milliseconds, to wait before disabling a follower after a link failure has been detected.</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>bond_updelay</code></td>
      <td style="text-align: left;">Optional integer. Specifies the time, in milliseconds, to wait before enabling a follower after a link recovery has been detected.</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>bond_lacp_rate</code></td>
      <td style="text-align: left;">Optional string. Option specifying the rate at which to ask the link partner to transmit LACPDU packets in 802.3ad mode. Available options are <code>fast</code> or <code>slow</code>. (Default: <code>slow</code>).</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>bond_xmit_hash_policy</code></td>
      <td style="text-align: left;">Optional string. The transmit hash policy to use for follower selection in balance-xor, 802.3ad, and tlb modes. Possible values are: <code>layer2</code>, <code>layer2+3</code>, <code>layer3+4</code>, <code>encap2+3</code>, <code>encap3+4</code>. (Default: <code>layer2</code>)</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>bond_num_grat_arp</code></td>
      <td style="text-align: left;">Optional integer. The number of peer notifications (IPv4 ARP or IPv6 Neighbour Advertisements) to be issued after a failover. (Default: 1)</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>mtu</code></td>
      <td style="text-align: left;">Optional integer. Maximum transmission unit.</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>accept_ra</code></td>
      <td style="text-align: left;">Optional Boolean. Accept router advertisements. (IPv6 only)</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>autoconf</code></td>
      <td style="text-align: left;">Optional Boolean. Perform stateless autoconfiguration. (IPv6 only)</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>bond_mode</code></td>
      <td style="text-align: left;">Optional string. The operating mode of the bond. (Default: active-backup).</td>
      </tr>
      </tbody>
      </table>
      <ul>
      <li>Supported bonding modes include:</li>
      </ul>
      <table>
      <colgroup>
      <col style="width: 37%" />
      <col style="width: 62%" />
      </colgroup>
      <thead>
      <tr class="header">
      <th style="text-align: left;">Mode</th>
      <th style="text-align: left;">Behaviour</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td style="text-align: left;"><code>balance-rr</code>:</td>
      <td style="text-align: left;">Transmit packets in sequential order from the first available follower through the last. This mode provides load balancing and fault tolerance.</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>active-backup</code></td>
      <td style="text-align: left;">Only one follower in the bond is active. A different follower becomes active if, and only if, the active follower fails. The bond’s MAC address is externally visible on only one port (network adaptor) to avoid confusing the switch.</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>balance-xor</code></td>
      <td style="text-align: left;">Transmit based on the selected transmit hash policy. The default policy is a simple [(source MAC address XOR’d with destination MAC address XOR packet type ID) modulo follower count].</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>broadcast</code></td>
      <td style="text-align: left;">Transmits everything on all follower interfaces. This mode provides fault tolerance.</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>802.3ad</code></td>
      <td style="text-align: left;">IEEE 802.3ad dynamic link aggregation. Creates aggregation groups that share the same speed and duplex settings. Uses all followers in the active aggregator according to the 802.3ad specification.</td>
      </tr>
      <tr class="even">
      <td style="text-align: left;"><code>balance-tlb</code></td>
      <td style="text-align: left;">Adaptive transmit load balancing: channel bonding that does not require any special switch support.</td>
      </tr>
      <tr class="odd">
      <td style="text-align: left;"><code>balance-alb</code></td>
      <td style="text-align: left;">Adaptive load balancing: includes balance-tlb plus receive load balancing (rlb) for IPV4 traffic, and does not require any special switch support. The receive load balancing is achieved by ARP negotiation.</td>
      </tr>
      </tbody>
      </table>
      <h2 id="create-bridges">Create bridges</h2>
      <p>To create a bridge interface via the MAAS UI:</p>
      <ol type="1">
      <li><p>Select <em>Machines</em> &gt; machine &gt; <em>Network</em> &gt; interface &gt; <em>Create bridge</em>.</p></li>
      <li><p>Define <em>Bridge type</em>, <em>MAC address</em>, <em>Fabric</em>, and <em>VLAN</em>.</p></li>
      <li><p>Optionally define <em>Bridge name</em>, <em>Subnet</em>, <em>Tags</em> and turn on <em>STP</em>.</p></li>
      <li><p>Register your new bridge by selecting <em>Save interface</em>.</p></li>
      </ol>
      <p>To create a bridge interface with the CLI:</p>
      <pre class="nohighlight"><code>maas $PROFILE interfaces create-bridge $SYSTEM_ID name=$BRIDGE_NAME \
      parent=$IFACE_ID</code></pre>
      <p>Use <code>parent</code> to define the primary interface used for the bridge:</p>
      <pre class="nohighlight"><code>maas admin interfaces create-bridge 4efwb4 name=bridged0 parent=4</code></pre>
      <p>The following parameters may be applied when creating a bridge:</p>
      <ul>
      <li><p><code>name</code>: Optional string. Name of the interface.</p></li>
      <li><p><code>mac_address</code>: Optional string. MAC address of the interface.</p></li>
      <li><p><code>tags</code>: Optional string. Tags for the interface.</p></li>
      <li><p><code>vlan</code>: Optional string. VLAN the interface is connected to.</p></li>
      <li><p><code>parent</code>: Optional integer. Parent interface id for this bridge interface.</p></li>
      <li><p><code>bridge_type</code>: Optional string. The type of bridge to create. Possible values are: <code>standard</code>, <code>ovs</code>.</p></li>
      <li><p><code>bridge_stp</code>: Optional Boolean. Turn spanning tree protocol on or off. (Default: False).</p></li>
      <li><p><code>bridge_fd</code>: Optional integer. Set bridge forward delay to time seconds. (Default: 15).</p></li>
      <li><p><code>mtu</code>: Optional integer. Maximum transmission unit.</p></li>
      <li><p><code>accept_ra</code>: Optional Boolean. Accept router advertisements. (IPv6 only)</p></li>
      <li><p><code>autoconf</code>: Optional Boolean. Perform stateless autoconfiguration. (IPv6 only)</p></li>
      </ul>
      <h2 id="delete-an-interface-cli">Delete an interface (CLI)</h2>
      <p>Interfaces can only be deleted via the CLI. The “delete” command can be used to delete a bridge interface, a bond interface or a physical interface:</p>
      <pre class="nohighlight"><code>maas $PROFILE interface delete $SYSTEM_ID $IFACE_ID</code></pre>
      <p>For example:</p>
      <pre class="nohighlight"><code>maas admin interface delete 4efwb4 15</code></pre>
      <p>The following is output after the successful deletion of an interface:</p>
      <pre class="nohighlight"><code>Success.
      Machine-readable output follows:</code></pre>
      <p>Note that while the label is presented, there is no machine-readable output expected after the successful execution of the delete command.</p>
      <h2 id="assign-an-interface-cli">Assign an interface (CLI)</h2>
      <p>You can only assign an interface to a fabric with the MAAS CLI. This task is made easier with the aid of the <code>jq</code> utility. It filters the <code>maas</code> command (JSON formatted) output and prints it in the desired way, which allows you to view and compare data quickly. Go ahead and install it:</p>
      <pre class="nohighlight"><code>sudo apt install jq</code></pre>
      <p>In summary, MAAS assigns an interface to a fabric by assigning it to a VLAN. First, we need to gather various bits of data.</p>
      <p>List some information on all machines:</p>
      <pre class="nohighlight"><code>maas $PROFILE machines read | jq &quot;.[] | \
          {hostname:.hostname, system_id: .system_id, status:.status}&quot; --compact-output</code></pre>
      <p>Example output:</p>
      <pre class="nohighlight"><code>{&quot;hostname&quot;:&quot;machine1&quot;,&quot;system_id&quot;:&quot;dfgnnd&quot;,&quot;status&quot;:4}
      {&quot;hostname&quot;:&quot;machine2&quot;,&quot;system_id&quot;:&quot;bkaf6e&quot;,&quot;status&quot;:6}
      {&quot;hostname&quot;:&quot;machine4&quot;,&quot;system_id&quot;:&quot;63wqky&quot;,&quot;status&quot;:6}
      {&quot;hostname&quot;:&quot;machine3&quot;,&quot;system_id&quot;:&quot;qwkmar&quot;,&quot;status&quot;:4}</code></pre>
      <p>You can only edit an interface when the corresponding machine has a status of ‘Ready’. This state is numerically denoted by the integer ‘4’.</p>
      <p>List some information for all interfaces on the machine in question (identified by its system id ‘dfgnnd’):</p>
      <pre class="nohighlight"><code>maas $PROFILE interfaces read dfgnnd | jq &quot;.[] | \
          {id:.id, name:.name, mac:.mac_address, vid:.vlan.vid, fabric:.vlan.fabric}&quot; --compact-output</code></pre>
      <p>Example output:</p>
      <pre class="nohighlight"><code>{&quot;id&quot;:8,&quot;name&quot;:&quot;eth0&quot;,&quot;mac&quot;:&quot;52:54:00:01:01:01&quot;,&quot;vid&quot;:0,&quot;fabric&quot;:&quot;fabric-1&quot;}
      {&quot;id&quot;:9,&quot;name&quot;:&quot;eth1&quot;,&quot;mac&quot;:&quot;52:54:00:01:01:02&quot;,&quot;vid&quot;:null,&quot;fabric&quot;:null}</code></pre>
      <p>List some information for all fabrics:</p>
      <pre class="nohighlight"><code>maas $PROFILE fabrics read | jq &quot;.[] | \
          {name:.name, vlans:.vlans[] | {id:.id, vid:.vid}}&quot; --compact-output</code></pre>
      <p>Example output:</p>
      <pre class="nohighlight"><code>{&quot;name&quot;:&quot;fabric-0&quot;,&quot;vlans&quot;:{&quot;id&quot;:5001,&quot;vid&quot;:0}}
      {&quot;name&quot;:&quot;fabric-1&quot;,&quot;vlans&quot;:{&quot;id&quot;:5002,&quot;vid&quot;:0}}
      {&quot;name&quot;:&quot;fabric-2&quot;,&quot;vlans&quot;:{&quot;id&quot;:5003,&quot;vid&quot;:0}}</code></pre>
      <p>This example will show how to move interface ‘8’ (on machine ‘dfgnnd’) from ‘fabric-1’ to ‘fabric-0’. Based on the gathered information, this will consist of changing the interface’s VLAN from ‘5002’ to ‘5001’:</p>
      <pre class="nohighlight"><code>maas $PROFILE interface update dfgnnd 8 vlan=5001 &gt;/dev/null</code></pre>
      <p>Verify the operation by relisting information for the machine’s interface:</p>
      <pre class="nohighlight"><code>maas $PROFILE interfaces read dfgnnd | jq &quot;.[] | \
          {id:.id, name:.name, mac:.mac_address, vid:.vlan.vid, fabric:.vlan.fabric}&quot; --compact-output</code></pre>
      <p>The output shows that the interface is now on fabric-0:</p>
      <pre class="nohighlight"><code>{&quot;id&quot;:8,&quot;name&quot;:&quot;eth0&quot;,&quot;mac&quot;:&quot;52:54:00:01:01:01&quot;,&quot;vid&quot;:0,&quot;fabric&quot;:&quot;fabric-0&quot;}
      {&quot;id&quot;:9,&quot;name&quot;:&quot;eth1&quot;,&quot;mac&quot;:&quot;52:54:00:01:01:02&quot;,&quot;vid&quot;:null,&quot;fabric&quot;:null}</code></pre>
      <h2 id="discover-identifiers-cli">Discover identifiers (CLI)</h2>
      <p>Interface identifiers can only be discovered via the MAAS CLI. The MAAS CLI uses a numeric interface identifier for many interface operations. Use the following command to retrieve the identifier(s):</p>
      <pre class="nohighlight"><code>maas $PROFILE interfaces read $SYSTEM_ID</code></pre>
      <p>Look for either id or the number at the end of an interface’s resource URI, such as <strong>15</strong> in the following example output:</p>
      <pre class="nohighlight"><code>&quot;id&quot;: 15,
      &quot;mac_address&quot;: &quot;52:54:00:55:06:40&quot;,
      ...
      &quot;name&quot;: &quot;ens9&quot;,
      ...
      &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4efwb4/interfaces/15/&quot;</code></pre>
      <h2 id="create-vlans-cli">Create VLANs (CLI)</h2>
      <p>VLAN interfaces can only be created via the MAAS CLI. To create a VLAN interface, use the following syntax:</p>
      <pre class="nohighlight"><code>maas $PROFILE vlans create $FABRIC_ID name=$NAME vid=$VLAN_ID</code></pre>
      <p>For example, the following command creates a VLAN called ’Storage network:</p>
      <pre class="nohighlight"><code>maas admin vlans create 0 name=&quot;Storage network&quot; vid=100</code></pre>
      <p>The above command generates the following output:</p>
      <pre class="nohighlight"><code>Success.
      Machine-readable output follows:
      {
          &quot;vid&quot;: 100,
          &quot;mtu&quot;: 1500,
          &quot;dhcp_on&quot;: false,
          &quot;external_dhcp&quot;: null,
          &quot;relay_vlan&quot;: null,
          &quot;name&quot;: &quot;Storage network&quot;,
          &quot;space&quot;: &quot;undefined&quot;,
          &quot;fabric&quot;: &quot;fabric-0&quot;,
          &quot;id&quot;: 5004,
          &quot;primary_rack&quot;: null,
          &quot;fabric_id&quot;: 0,
          &quot;secondary_rack&quot;: null,
          &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/vlans/5004/&quot;
      }</code></pre>
      <p>Be aware that the $VLAN_ID parameter does not indicate a VLAN ID that corresponds to the VLAN tag. You must first create the VLAN and then associate it with the interface:</p>
      <pre class="nohighlight"><code>maas $PROFILE interfaces create-vlan $SYSTEM_ID vlan=$OUTPUT_VLAN_ID \
      parent=$IFACE_ID</code></pre>
      <p><strong>OUTPUT_VLAN_ID</strong> corresponds to the id value output when MAAS created the VLAN.</p>
      <p>The following example contains values that correspond to the output above:</p>
      <pre class="nohighlight"><code>maas admin interfaces create-vlan 4efwb4 vlan=5004 parent=4</code></pre>
      <p>The above command generates the following output:</p>
      <pre class="nohighlight"><code>Success.
      Machine-readable output follows:
      {
          &quot;tags&quot;: [],
          &quot;type&quot;: &quot;vlan&quot;,
          &quot;enabled&quot;: true,
          &quot;system_id&quot;: &quot;4efwb4&quot;,
          &quot;id&quot;: 21,
          &quot;children&quot;: [],
          &quot;mac_address&quot;: &quot;52:54:00:eb:f2:29&quot;,
          &quot;params&quot;: {},
          &quot;vlan&quot;: {
              &quot;vid&quot;: 100,
              &quot;mtu&quot;: 1500,
              &quot;dhcp_on&quot;: false,
              &quot;external_dhcp&quot;: null,
              &quot;relay_vlan&quot;: null,
              &quot;id&quot;: 5004,
              &quot;secondary_rack&quot;: null,
              &quot;fabric_id&quot;: 0,
              &quot;space&quot;: &quot;undefined&quot;,
              &quot;fabric&quot;: &quot;fabric-0&quot;,
              &quot;name&quot;: &quot;Storage network&quot;,
              &quot;primary_rack&quot;: null,
              &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/vlans/5004/&quot;
          },
          &quot;parents&quot;: [
              &quot;ens3&quot;
          ],
          &quot;effective_mtu&quot;: 1500,
          &quot;links&quot;: [
              {
                  &quot;id&quot;: 55,
                  &quot;mode&quot;: &quot;link_up&quot;
              }
          ],
          &quot;discovered&quot;: null,
          &quot;name&quot;: &quot;ens3.100&quot;,
          &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4efwb4/interfaces/21/&quot;
      }</code></pre>
      <h2 id="deleting-vlans-cli">Deleting VLANs (CLI)</h2>
      <p>VLAN interfaces can only be deleted via the MAAS CLI. The following command outlines the syntax required to delete a VLAN interface from the command line:</p>
      <pre class="nohighlight"><code>maas $PROFILE vlan delete $FABRIC__ID $VLAN_ID</code></pre>
      <p>Using the values from previous examples, you executed this step as follows:</p>
      <pre class="nohighlight"><code>maas admin vlan delete 0 100</code></pre>
      <h2 id="set-up-proxies">Set up proxies</h2>
      <p>MAAS lets you set up a proxy for managed machines to access web resources. Your choices:</p>
      <ol type="1">
      <li>Internal proxy (default)</li>
      <li>External proxy</li>
      <li>No proxy</li>
      </ol>
      <p>Toggle these options and control proxy use by subnet. This section will show you how.</p>
      <p>To toggle the proxy in the MAAS UI, go to <em>Settings</em> &gt; <em>Network services</em> &gt; <em>Proxy</em>, and choose:</p>
      <ul>
      <li><p>To enable the internal proxy, ensure that the checkbox adjacent to ‘MAAS Built-in’ is selected. This internal proxy is the default configuration.</p></li>
      <li><p>To enable an external proxy, activate the ‘External’ checkbox and use the new field that is displayed to define the proxy’s URL (and port if necessary).</p></li>
      <li><p>An upstream cache peer can be defined by enabling the ‘Peer’ checkbox and entering the external proxy URL into the field. With this enabled, machines will be configured to use the MAAS built-in proxy to download cached APT packages.</p></li>
      <li><p>To prevent MAAS machines from using a proxy, enable the ‘Don’t use a proxy’ checkbox.</p></li>
      </ul>
      <p>You can also toggle proxies with the CLI. Enabling and disabling proxies in the CLI is done via a Boolean option (‘true’ or ‘false’). The following command will disable proxying completely:</p>
      <pre class="nohighlight"><code>maas $PROFILE maas set-config name=enable_http_proxy value=false</code></pre>
      <p>To set an external proxy, ensure proxying is enabled (see above) and then define it:</p>
      <pre class="nohighlight"><code>maas $PROFILE maas set-config name=http_proxy value=$EXTERNAL_PROXY</code></pre>
      <p>For example,</p>
      <pre class="nohighlight"><code>maas $PROFILE maas set-config name=enable_http_proxy value=true
      maas $PROFILE maas set-config name=http_proxy value=http://squid.example.com:3128/</code></pre>
      <p>Enabling and disabling proxying per subnet is also done via a Boolean option (‘true’ or ‘false’). Here is how you can disable proxying on a per-subnet basis:</p>
      <pre class="nohighlight"><code>maas $PROFILE subnet update $SUBNET_CIDR allow_proxy=false</code></pre>
      <p>For example,</p>
      <pre class="nohighlight"><code>maas $PROFILE subnet update 192.168.0.0/22 allow_proxy=false</code></pre>
      <p><strong>NOTE</strong> that the proxy service will still be running.</p>
      <h2 id="sync-time-with-ntp">Sync time with NTP</h2>
      <p>MAAS provides managed NTP services (with <a href="https://chrony.tuxfamily.org/">Chrony</a><strong>^</strong>) for all region and rack controllers. This arrangement allows MAAS to both keep its controllers synchronised, and keep deployed machines synchronised as well. You can configure NTP on the ‘Network services’ tab of the ‘Settings’ page.</p>
      <p>The region controller configures the NTP service to keep its time synchronised from one or more external sources. By default, the MAAS region controller uses <code>ntp.ubuntu.com</code>. Rack controllers also configure the NTP service, synchronising their time with the region controllers. Rack controllers also configure DHCP with the correct NTP information, so that the DHCP servers can manage the NTP clients for the rack. Any machine on the network that obtains a DHCP lease from MAAS will benefit from NTP support.</p>
      <h2 id="external-ntp">External NTP</h2>
      <p>External sites, such as an existing NTP infrastructure, can be used directly as a time source for both rack controllers and machines.</p>
      <p>You can specify an external NTP site site with the MAAS UI by choosing the NTP server(s) and selecting the <em>External Only</em> option. To do so, go to <em>Settings</em> &gt; <em>Network services</em> &gt; <em>NTP</em> and enter the address of the desired NTP server.</p>
      <p>Note that the region controller always uses an external site.</p>
      <p>You can specify an external NTP server via the CLI, with two successive commands:</p>
      <pre class="nohighlight"><code>maas $PROFILE maas set-config name=ntp_servers value=$NTP_IP_ADDRESS</code></pre>
      <p>followed by:</p>
      <pre class="nohighlight"><code>maas admin maas set-config name=ntp_external_only value=true</code></pre>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
	  let coll = document.getElementsByClassName("collapsible");

	  for (let i = 0; i < coll.length; i++) {
	      coll[i].addEventListener("click", function() {
		  toggleCollapsible(this);
	      });
	  }
      });

      function toggleCollapsible(element) {
	  element.classList.toggle("active");
	  let content = element.nextElementSibling;
	  if (content.style.display === "none" || content.style.display === "") {
	      content.style.display = "block";
	  } else {
	      content.style.display = "none";
	  }
      }

      // Assuming you have a way to identify which menu item should be open, e.g., via URL
      function openMenuItemBasedOnPage() {
	  let currentPage = window.location.href; // or however you determine the current page
	  let menuItem;

	  // Logic to determine which menu item corresponds to the current page
	  if (currentPage.includes("page1")) {
	      menuItem = document.getElementById("menu-item-1");
	  } else if (currentPage.includes("page2")) {
	      menuItem = document.getElementById("menu-item-2");
	  }

	  if (menuItem) {
	      toggleCollapsible(menuItem);
	      menuItem.classList.add("active");
	  }
      }

      // Call this function when the page loads
      openMenuItemBasedOnPage();
    </script>
  </body>
</html>

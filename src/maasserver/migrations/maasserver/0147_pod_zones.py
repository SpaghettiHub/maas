# Generated by Django 1.11.9 on 2018-02-20 22:06
from django.db import migrations, models
import django.db.models.deletion
from django.utils import timezone

from maasserver.models import Zone
import maasserver.models.node


def get_default_zone():
    default_zone_name = "default"
    now = timezone.now()

    zone, _ = Zone.objects.get_or_create(
        name=default_zone_name,
        defaults={
            "name": default_zone_name,
            "created": now,
            "updated": now,
        },
    )
    return zone.id


class Migration(migrations.Migration):
    dependencies = [("maasserver", "0146_add_rootkey")]

    operations = [
        migrations.AddField(
            model_name="bmc",
            name="zone",
            field=models.ForeignKey(
                default=get_default_zone,
                on_delete=django.db.models.deletion.SET_DEFAULT,
                to="maasserver.Zone",
                verbose_name="Physical zone",
            ),
        )
    ]
